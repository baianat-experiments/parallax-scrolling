!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Scroll=e()}(this,function(){"use strict";function t(t){return"string"==typeof t?document.querySelector(t):t}function e(t,e){var n=arguments;void 0===e&&(e=16);var a=!1;return function(){a||(t.apply(void 0,n),a=!0,setTimeout(function(){a=!1},e))}}function n(t,e){var n=e[0]>e[1]?e[0]:e[1],a=e[0]<e[1]?e[0]:e[1];return Math.max(Math.min(t,n),a)}var a=function(t){void 0===t&&(t=[]),this.elementsData=t,this._init()};return a.prototype.addElement=function(t){var e=this;this.elementsData.push(t),this._initElements(),setTimeout(function(){return e.update()},500)},a.prototype._init=function(){var t=this;this.scrolled=window.scrollY,this.viewport={height:window.innerHeight,width:window.innerWidth},this._initObserver(),this._initElements(),this._initEvents(),setTimeout(function(){return t.update()},500)},a.prototype._initElements=function(){var e=this;this.elements=this.elementsData.map(function(e){return t(e.element)}),this.elements.forEach(function(t,n){e.addMissingTransformation(e.elementsData[n]),t.style.transform="\n      translate3d(\n        "+e.elementsData[n].translate.x[0]+e.elementsData[n].translate.unit+",\n        "+e.elementsData[n].translate.y[0]+e.elementsData[n].translate.unit+",\n        0\n      )\n      rotate("+e.elementsData[n].rotate[0]+"deg)\n      scale("+e.elementsData[n].scale[0]+")",t.style.opacity=e.elementsData[n].opacity[0],e.generateFixedData(e.elementsData[n],t),e.observer.observe(t)})},a.prototype._initObserver=function(){this.observer=new IntersectionObserver(function(t){t.forEach(function(t){t.intersectionRatio>0?t.target.classList.add("is-inViewPort"):t.target.classList.remove("is-inViewPort")})},{threshold:[0,.25,.75,1]})},a.prototype._initEvents=function(){var t=this;this.scrolling=!1,window.addEventListener("scroll",function(){t.scrolled=window.scrollY,t.scrolling||(window.requestAnimationFrame(function(){t.update(),t.scrolling=!1}),t.scrolling=!0)}),window.addEventListener("resize",e(function(){t.viewport={height:window.innerHeight,width:window.innerWidth},t.scrolled=window.scrollY,t.update()},100))},a.prototype.update=function(){var t=this;this.elements.forEach(function(e,n){if(e.classList.contains("is-inViewPort")){var a=t.elementsData[n];a.class&&e.classList.add("is-active"),t.transform=t.getTransform(a),console.log(t.transform),e.style.transform="\n        translate3d(\n          "+t.transform.x+a.translate.unit+",\n          "+t.transform.y+a.translate.unit+",\n          0\n        )\n        rotate("+t.transform.deg+"deg)\n        scale("+t.transform.scale+")",e.style.opacity=t.transform.opacity}else e.classList.remove(t.elementsData[n].class)})},a.prototype.getTransform=function(t){var e=this.scrolled-t.position;return{y:n(t.translate.y[0]+Math.sign(t.translate.y[1])*e*t.unitPerScroll.y,t.translate.y),x:n(t.translate.x[0]+Math.sign(t.translate.x[1])*e*t.unitPerScroll.x,t.translate.x),deg:n(t.rotate[0]+Math.sign(t.rotate[1])*e*t.unitPerScroll.deg,t.rotate),scale:n(t.scale[0]+(t.scale[0]>t.scale[1]?-1:1)*e*t.unitPerScroll.scale,t.scale),opacity:n(t.opacity[0]+(t.opacity[0]>t.opacity[1]?-1:1)*e*t.unitPerScroll.opacity,t.opacity)}},a.prototype.addMissingTransformation=function(t){t.translate||(t.translate={}),t.translate.x||(t.translate.x=[0,0]),t.translate.y||(t.translate.y=[0,0]),t.translate.unit||(t.translate.unit="px"),t.rotate||(t.rotate=[0,0]),t.opacity||(t.opacity=[1,1]),t.scale||(t.scale=[1,1])},a.prototype.generateFixedData=function(t,e){var n=e.getBoundingClientRect(),a={y:Math.abs(t.translate.y[1]-t.translate.y[0]),x:Math.abs(t.translate.x[1]-t.translate.x[0]),deg:Math.abs(t.rotate[1]-t.rotate[0]),scale:Math.abs(t.scale[1]-t.scale[0]),opacity:Math.abs(t.opacity[1]-t.opacity[0])},i=0===a.y||0===t.translate.y[1]?1:Math.sign(t.translate.y[1]),s="px"===t.translate.unit?a.y:e.parentNode.clientHeight*a.y/100,r=this.viewport.height+s+i*n.height;t.rect=n,t.position=this.scrolled+n.top-this.viewport.height,t.unitPerScroll={y:a.y/r,x:a.x/r,deg:a.deg/r,scale:a.scale/r,opacity:a.opacity/r}},a});